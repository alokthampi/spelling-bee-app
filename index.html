<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spelling Bee Practice</title>

  <style>
    :root {
      --bg: #0d1117;
      --card: #161b22;
      --border: #30363d;
      --accent: #1f6feb;
      --reset: #6e7681;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, Arial, sans-serif;
      background: var(--bg);
      color: #e6edf3;
      padding: 12px;
    }

    .container {
      max-width: 1100px;
      margin: auto;
    }

    h1 {
      font-size: 22px;
      margin-bottom: 10px;
    }

    .difficulty-bar {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 10px;
      background: var(--card);
      padding: 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      margin-bottom: 12px;
    }

    .difficulty-bar select {
      background-color: var(--bg);
      color: #e6edf3;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid var(--border);
      font-size: 16px;
    }

    .search-box {
      background: var(--bg);
      color: #e6edf3;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid var(--border);
      font-size: 16px;
    }

    .reset-btn {
      background: var(--reset);
      color: white;
      border-radius: 8px;
      border: none;
      font-size: 14px;
      cursor: pointer;
      padding: 8px 12px;
      line-height: 1;
      min-height: 44px;
      white-space: nowrap;
    }

    #categoryCount,
    #progressText {
      font-size: 14px;
      margin-bottom: 6px;
    }

    /* üî§ MULTI-SELECT LETTER FILTERS */
    .letter-filter {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      grid-column: 1 / -1;
    }

    .letter-btn {
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: var(--bg);
      color: #e6edf3;
      font-size: 14px;
      cursor: pointer;
      min-width: 36px;
      text-align: center;
    }

    .letter-btn.active {
      background: var(--accent);
      color: white;
      font-weight: bold;
    }

    .layout {
      display: flex;
      gap: 14px;
    }

    .word-list {
      flex: 1;
      position: relative;
      background: var(--card);
      padding: 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      max-height: 60vh;
      overflow-y: auto;
    }

    .word-list-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 8px;
      gap: 8px;
    }

    .word-list-header h3 {
      margin: 0;
      font-size: 16px;
    }

    .shuffle-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 5;
      padding: 6px 10px;
      font-size: 13px;
    }

    .word-item {
      padding: 14px 12px;
      font-size: 16px;
      border-bottom: 1px solid var(--border);
      cursor: pointer;
    }

    .word-item.correct {
      background: #1f8b4c;
      color: white;
      font-weight: bold;
    }

    .word-item.active {
      background: #f1c40f;
      color: black;
      font-weight: bold;
    }

    .word-item.wrong {
      background: #e74c3c !important;
      color: white !important;
      font-weight: bold;
    }

    .card {
      flex: 2;
      background: var(--card);
      padding: 14px;
      border-radius: 12px;
      border: 1px solid var(--border);
    }

    .audio-buttons,
    .mark-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
      flex-wrap: wrap;
    }

    .audio-buttons button,
    .mark-buttons button {
      flex: 1;
      min-width: 140px;
      padding: 14px;
      font-size: 16px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      color: white;
      background: var(--accent);
    }

    .mark-buttons .correct { background: #2ecc71; }
    .mark-buttons .wrong { background: #e74c3c; }

    .audio-buttons button:disabled {
      background: #30363d;
      color: #8b949e;
    }

    .label {
      margin-top: 12px;
      font-weight: bold;
      color: #8b949e;
    }

    /* üì± Mobile layout tweaks */
    @media (max-width: 768px) {
      .layout { flex-direction: column; }
      .word-list { max-height: 35vh; }
      .shuffle-btn { position: static; }

      /* üîí Hide Clear button on mobile ONLY */
      .desktop-only {
        display: none !important;
      }
    }
  </style>
</head>

<body>
<div class="container">
  <h1>üêù Nikku's Spelling Bee Practice</h1>

  <div class="difficulty-bar">
    <select id="scopeFilter">
      <option value="regional" selected>Regional</option>
      <option value="school">School</option>
    </select>

    <select id="difficultyFilter">
      <option value="all">All Bees</option>
      <option value="one">One Bee üêù</option>
      <option value="two">Two Bee üêùüêù</option>
      <option value="three">Three Bee üêùüêùüêù</option>
    </select>

    <select id="resultFilter">
      <option value="all">All Results</option>
      <option value="correct">Correct</option>
      <option value="wrong">Wrong</option>
    </select>

    <input id="searchInput" class="search-box" placeholder="üîç Search words" />

    <div class="letter-filter" id="letterFilter"></div>
  </div>

  <div id="categoryCount"></div>
  <div id="progressText"></div>

  <div class="layout">
    <div class="word-list">
      <div class="word-list-header">
        <h3>Word List</h3>
        <button
          id="shuffleBtn"
          class="reset-btn shuffle-btn"
          style="display:none;"
          onclick="shuffleFilteredWords()"
        >
          üîÄ Shuffle
        </button>
      </div>

      <div id="wordList"></div>
    </div>

    <div class="card">
      <h2 id="word">Select a word</h2>

      <div class="mark-buttons">
        <button class="correct" onclick="markAnswer('correct')">‚úÖ Correct</button>
        <button class="wrong" onclick="markAnswer('wrong')">‚ùå Wrong</button>
        <button class="reset-btn desktop-only" onclick="clearResult()">‚Ü©Ô∏è Clear</button>
      </div>

      <div class="audio-buttons">
        <button id="mwPronunciationBtn" onclick="playMWPronunciation()" disabled>
          üîä Dictionary
        </button>
        <button onclick="playAmericanPronunciation()">üó£Ô∏è American</button>
      </div>

      <div class="audio-buttons">
        <button onclick="readDefinition()">‚ñ∂Ô∏è Definition</button>
        <button onclick="readSentence()">‚ñ∂Ô∏è Sentence</button>
      </div>

      <div class="label">Difficulty</div>
      <div id="difficulty">‚Äî</div>

      <div class="label">Origin</div>
      <div id="origin">‚Äî</div>

      <div class="label">Definition</div>
      <div id="definition">‚Äî</div>

      <div class="label">Sentence</div>
      <div id="sentence">‚Äî</div>

      <div class="label">Part of Speech</div>
      <div id="pos">‚Äî</div>
    </div>
  </div>

  <div style="margin-top:20px;text-align:center;">
    <button class="reset-btn" style="width:100%;max-width:400px;" onclick="confirmReset()">
      ‚ôªÔ∏è Start Over
    </button>
  </div>
</div>

<!-- üî§ Multi-letter logic -->
<script>
  window.selectedLetters = new Set();

  function renderLetterFilter() {
    const container = document.getElementById("letterFilter");
    "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(letter => {
      const btn = document.createElement("button");
      btn.textContent = letter;
      btn.className = "letter-btn";

      btn.onclick = () => {
        btn.classList.toggle("active");
        if (window.selectedLetters.has(letter)) {
          window.selectedLetters.delete(letter);
        } else {
          window.selectedLetters.add(letter);
        }
        applyFilters();
      };

      container.appendChild(btn);
    });
  }

  document.addEventListener("DOMContentLoaded", renderLetterFilter);
</script>

<!-- Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyD6HuzbJxcucxjO0NCFqivfk9zXuTFrbMM",
    authDomain: "spelling-bee-practice-e4b0c.firebaseapp.com",
    projectId: "spelling-bee-practice-e4b0c",
    messagingSenderId: "431771439388",
    appId: "1:431771439388:web:598787f7878e564ddc2ad9"
  };

  window.firebaseApp = initializeApp(firebaseConfig);
  window.db = getFirestore(firebaseApp);
</script>

<script src="app.js"></script>
</body>
</html>
